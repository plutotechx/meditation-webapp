<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard - Daily Meditation</title>

  <style>
    :root{
      --bg:#0a1322;
      --card:rgba(255,255,255,.07);
      --border:rgba(255,255,255,.10);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.72);

      --good:#30d16a;
      --mid:#f3c43a;
      --bad:#ff4d4d;

      --radius:18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      background:
        radial-gradient(1200px 600px at 25% 0%, rgba(88,140,255,.16), transparent 60%),
        radial-gradient(900px 500px at 80% 15%, rgba(0,240,255,.12), transparent 55%),
        linear-gradient(180deg, #081224 0%, #070f1e 100%);
      color:var(--text);
      min-height:100vh;
    }

    .wrap{max-width:1180px;margin:0 auto;padding:26px 18px 30px}

    /* ===== Top bar ===== */
    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    h1{margin:0;font-size:26px;font-weight:900}

    .autoBox{
      min-width:320px;
      max-width:520px;
      width:fit-content;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px;
      box-shadow:0 18px 50px rgba(0,0,0,.35);
      padding:10px 12px;
      min-height:62px;
      display:flex;
      align-items:center;
      position:relative;
      overflow:hidden;
    }
    .autoBox::before{
      content:"";
      position:absolute; inset:-2px;
      background:radial-gradient(closest-side at 70% 0%, rgba(120,200,255,.22), transparent 70%);
      pointer-events:none;
    }

    .autoRow{
      width:100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      position:relative;
      z-index:1;
    }

    .autoTopLine{
      display:flex;
      align-items:center;
      gap:8px;
      font-weight:900;
      white-space:nowrap;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.18);
      font-size:12px;
      font-weight:900;
    }

    .blinkDot{
      width:10px;height:10px;border-radius:999px;
      background:var(--good);
      box-shadow:0 0 14px rgba(48,209,106,.55);
      animation: blink 1.1s infinite;
    }
    .blinkDot.off{
      background:var(--bad);
      box-shadow:0 0 14px rgba(255,77,77,.45);
    }
    @keyframes blink{
      0%,100%{opacity:.25;transform:scale(.92)}
      50%{opacity:1;transform:scale(1)}
    }

    .autoSubLine{
      font-size:12px;
      color:rgba(234,240,255,.72);
      white-space:nowrap;
    }

    .toggleWrap{display:flex;align-items:center;gap:10px}
    .toggleLabel{font-size:12px;font-weight:900;color:rgba(234,240,255,.75)}
    .switch{
      width:54px;height:30px;border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.25);
      position:relative;cursor:pointer;
    }
    .switch::after{
      content:"";
      position:absolute;top:3px;left:3px;
      width:24px;height:24px;border-radius:999px;
      background:rgba(255,255,255,.85);
      box-shadow:0 10px 20px rgba(0,0,0,.35);
      transition:.18s ease;
    }
    .switch.on{
      background:rgba(48,209,106,.18);
      border-color:rgba(48,209,106,.30);
    }
    .switch.on::after{transform:translateX(24px)}

    .weekTitle{font-size:20px;font-weight:900;margin:10px 0 12px}

    /* ===== KPI ===== */
    .kpis{
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:14px;
      margin:6px 0 16px;
    }
    @media (max-width:900px){.kpis{grid-template-columns:1fr}}

    .kpi{
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      padding:16px;
      box-shadow:0 18px 50px rgba(0,0,0,.35);
    }
    .kpi .label{font-size:14px;color:var(--muted);font-weight:800}
    .kpi .value{font-size:44px;font-weight:900;margin-top:10px}
    .value.good{color:var(--good)}
    .value.bad{color:var(--bad)}

    .pieWrap{display:flex;gap:14px;align-items:center;margin-top:10px}
    .pie{
      width:110px;height:110px;border-radius:50%;
      background:conic-gradient(var(--good) 0 0, rgba(255,255,255,.12) 0 100%);
      border:1px solid rgba(255,255,255,.14);
    }

    /* ===== Table ===== */
    .table{
      width:100%;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
      border-collapse:separate;
      border-spacing:0;
      overflow:hidden;
    }
    .table thead th{
      padding:14px;
      background:rgba(0,0,0,.20);
      font-size:14px;
      font-weight:900;
      text-align:left;
    }
    .table tbody td{
      padding:14px;
      border-top:1px solid rgba(255,255,255,.08);
      vertical-align:top;
    }

    .days{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:8px;
      min-width:520px;
    }

    .daybox{
      min-height:64px;
      border-radius:10px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:6px;
      font-weight:900;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.20);
    }
    .daybox.good{background:rgba(48,209,106,.25)}
    .daybox.mid{background:rgba(243,196,58,.25)}
    .daybox.bad{background:rgba(255,77,77,.25)}

    .btns{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
    .btn{
      padding:10px 14px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.08);
      color:var(--text);
      text-decoration:none;
      font-weight:900;
    }
  </style>
</head>

<body>
<div class="wrap">

  <div class="topbar">
    <h1>Dashboard</h1>
    <div class="autoBox">
      <div class="autoRow">
        <div>
          <div class="autoTopLine">
            <span class="pill">
              <span id="runDot" class="blinkDot"></span>
              Auto Refresh
            </span>
            <span class="pill" id="statePill">Active</span>
          </div>
          <div class="autoSubLine" id="refreshLine">กำลังเตรียม...</div>
        </div>
        <div class="toggleWrap">
          <span class="toggleLabel" id="toggleLabel">เปิด</span>
          <div id="toggleSwitch" class="switch on"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="weekTitle" id="weekHeader">กำลังโหลด...</div>

  <table class="table">
    <thead>
      <tr>
        <th>ชื่อ</th>
        <th>% สัปดาห์</th>
        <th>ครบทั้งวัน</th>
        <th>สรุป 7 วัน</th>
      </tr>
    </thead>
    <tbody id="tbody">
      <tr><td colspan="4">กำลังโหลด...</td></tr>
    </tbody>
  </table>

  <div class="btns">
    <a class="btn" href="/">กลับหน้าบันทึกข้อมูล</a>
    <a class="btn" href="/status.html">ไปหน้าตรวจสอบสถานะ</a>
  </div>

</div>
</body>
</html>
